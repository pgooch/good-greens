{"ast":null,"code":"import _classCallCheck from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/phillip/Development/vhosts/playground.develop/good-green/src/components/naughty-list/index.js\";\nimport React, { Component } from 'react';\nimport { ListGroup, Container, Row, Col } from 'reactstrap';\nimport SearchResult from '../search-result'; // import { push } from 'connected-react-router'\n// import { bindActionCreators } from 'redux'\n// import { connect } from 'react-redux'\n// import ReactTable from \"react-table\";\n// Components\n\nvar NaughtyList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NaughtyList, _Component);\n\n  function NaughtyList(props) {\n    var _this;\n\n    _classCallCheck(this, NaughtyList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NaughtyList).call(this, props));\n\n    _this.getLicenseDetails = function (licNums) {\n      console.log('getLicenseDetails', licNums);\n      var licDetailsCall = ['https://data.lcb.wa.gov/resource/bhbp-x4eb.json?'];\n      licDetailsCall.push('$where=license in (\"' + licNums.join(',') + '\") ');\n      fetch(licDetailsCall.join('')).then(function (response) {\n        return response.json();\n      }).then(_this.storeLicenseDetails);\n    };\n\n    _this.storeLicenseDetails = function (data) {\n      console.log('storeLicenseDetails');\n      data.forEach(function (lic, extra) {\n        console.log('data lic extra', data, lic, extra);\n      }); // if(data[0]!==undefined){\n      // \tlet tempState = this.state\n      // \ttempState.violators[data[0].license] = {...this.state.violators[data[0].license],...data[0]}\n      // \tthis.setState(tempState);\n      // }\n    };\n\n    _this.getNaughty = function () {\n      var naughtyCall = ['https://data.lcb.wa.gov/resource/dgm4-3cm6.json?'];\n      naughtyCall.push('$select=license_number,count(penalty_type)');\n      naughtyCall.push('&$group=(license_number)&$order=count(penalty_type)desc');\n      naughtyCall.push('&$limit=10');\n      fetch(naughtyCall.join('')).then(function (response) {\n        return response.json();\n      }).then(_this.calculateNaughtiness);\n    };\n\n    _this.calculateNaughtiness = function (data) {\n      var tempState = _this.state; // This will load up the violators deatils for the listing\n\n      data.forEach(function (violator) {\n        var lic = violator.license_number;\n        tempState.violators[lic] = {};\n        tempState.violators[lic].license_number = lic;\n        tempState.violators[lic].violations = violator.count_penalty_type;\n        tempState.violatorsOrdered.push(lic);\n      });\n\n      _this.setState(tempState);\n\n      _this.getLicenseDetails(Object.keys(tempState.violators));\n    };\n\n    _this.displayList = function () {\n      var results = [];\n\n      _this.state.violatorsOrdered.forEach(function (license) {\n        results.push(React.createElement(SearchResult, {\n          data: _this.state.violators[license],\n          type: \"naughtyList\",\n          key: 'naughtyList' + license,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }));\n      });\n\n      return results;\n    };\n\n    _this.state = {\n      violators: {},\n      violatorsOrdered: [] // Loop through all the licenses and grab the details we need\n\n    };\n\n    _this.getNaughty();\n\n    return _this;\n  } // This will grab the basic license information for the procided license number\n\n\n  _createClass(NaughtyList, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"This is the naughty page, its kinda mess at the moment\")), React.createElement(ListGroup, {\n        className: 'row',\n        flush: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, this.displayList()), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return NaughtyList;\n}(Component); // <pre>{JSON.stringify(this.state,null,2)}</pre>\n\n\nexport default NaughtyList;","map":{"version":3,"sources":["/Users/phillip/Development/vhosts/playground.develop/good-green/src/components/naughty-list/index.js"],"names":["React","Component","ListGroup","Container","Row","Col","SearchResult","NaughtyList","props","getLicenseDetails","licNums","console","log","licDetailsCall","push","join","fetch","then","response","json","storeLicenseDetails","data","forEach","lic","extra","getNaughty","naughtyCall","calculateNaughtiness","tempState","state","violator","license_number","violators","violations","count_penalty_type","violatorsOrdered","setState","Object","keys","displayList","results","license"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { ListGroup, Container, Row, Col } from 'reactstrap';\nimport SearchResult from '../search-result'\n// import { push } from 'connected-react-router'\n// import { bindActionCreators } from 'redux'\n// import { connect } from 'react-redux'\n// import ReactTable from \"react-table\";\n\n// Components\n\nclass NaughtyList extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tviolators: {},\n\t\t\tviolatorsOrdered: [],\n\t\t}\n\t\t// Loop through all the licenses and grab the details we need\n\t\tthis.getNaughty();\n\t}\n\n\t// This will grab the basic license information for the procided license number\n\tgetLicenseDetails = (licNums) => {\n\t\tconsole.log('getLicenseDetails',licNums)\n\t\tlet licDetailsCall = ['https://data.lcb.wa.gov/resource/bhbp-x4eb.json?'];\n\t\tlicDetailsCall.push('$where=license in (\"'+licNums.join(',')+'\") ')\n\t\tfetch(licDetailsCall.join('')).then(response => response.json()).then(this.storeLicenseDetails)\n\t}\n\t// Simply saves above\n\tstoreLicenseDetails = (data) => {\n\t\tconsole.log('storeLicenseDetails')\n\t\tdata.forEach((lic,extra)=>{\n\t\t\tconsole.log('data lic extra',data,lic,extra)\n\t\t})\n\t\t// if(data[0]!==undefined){\n\t\t// \tlet tempState = this.state\n\t\t// \ttempState.violators[data[0].license] = {...this.state.violators[data[0].license],...data[0]}\n\t\t// \tthis.setState(tempState);\n\t\t// }\n\t}\n\n\t// This will look for other licenses that may have the same organization name, so we can give the option to combine.\n\tgetNaughty = () => {\n\t\tlet naughtyCall = ['https://data.lcb.wa.gov/resource/dgm4-3cm6.json?'];\n\t\tnaughtyCall.push('$select=license_number,count(penalty_type)');\n\t\tnaughtyCall.push('&$group=(license_number)&$order=count(penalty_type)desc');\n\t\tnaughtyCall.push('&$limit=10');\n\t\tfetch(naughtyCall.join('')).then(response => response.json()).then(this.calculateNaughtiness)\n\t}\n\t// Determins the naughtiness of each license number, stored in a violators object, with the specific WAC codes in a seperate one\n\tcalculateNaughtiness = (data) => {\n\t\tlet tempState = this.state\n\n\t\t// This will load up the violators deatils for the listing\n\t\tdata.forEach((violator)=>{\n\t\t\tlet lic = violator.license_number\n\t\t\ttempState.violators[lic] = {};\n\t\t\ttempState.violators[lic].license_number = lic\n\t\t\ttempState.violators[lic].violations = violator.count_penalty_type\n\t\t\ttempState.violatorsOrdered.push(lic)\n\t\t});\n\t\tthis.setState(tempState);\n\t\tthis.getLicenseDetails(Object.keys(tempState.violators))\n\n\t}\n\n\t// Simply loops to call the list and renders it out, shared the SearchResults component.\n\tdisplayList = () => {\n\t\tlet results = [];\n\t\tthis.state.violatorsOrdered.forEach((license) => {\n\t\t\tresults.push(<SearchResult data={this.state.violators[license]} type=\"naughtyList\" key={'naughtyList'+license}/>)\n\t\t})\n\t\treturn results;\n\t}\n\n\trender(){ \n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>This is the naughty page, its kinda mess at the moment</Col>\n\t\t\t\t</Row>\n\t\t\t\t<ListGroup className={'row'} flush>\n\t\t\t\t\t{this.displayList()}\n\t\t\t\t</ListGroup>\n\t\t\t\t<hr/>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\t\t\t\t// <pre>{JSON.stringify(this.state,null,2)}</pre>\n\nexport default NaughtyList;"]},"metadata":{},"sourceType":"module"}