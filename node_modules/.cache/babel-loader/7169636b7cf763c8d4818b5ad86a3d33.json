{"ast":null,"code":"import _classCallCheck from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/phillip/Development/vhosts/playground.develop/good-green/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/phillip/Development/vhosts/playground.develop/good-green/src/components/details/index.js\";\nimport React, { Component } from 'react'; // import { Link } from 'react-router-dom'\n// import { push } from 'connected-react-router'\n// import { bindActionCreators } from 'redux'\n// import { connect } from 'react-redux'\n// import ReactTable from \"react-table\";\n// Components\n\nimport SearchResult from '../search-result';\n\nvar Detail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Detail, _Component);\n\n  function Detail(props) {\n    var _this;\n\n    _classCallCheck(this, Detail);\n\n    console.log(props);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Detail).call(this, props)); // Simple state for just the search term\n\n    _this.updateSearch = function (e) {\n      var term = e.target.querySelector('#search-term').value;\n      var tempState = _this.state;\n      tempState.input = term.toUpperCase();\n\n      _this.setState(tempState);\n\n      _this.getSearchResults();\n\n      e.preventDefault();\n    };\n\n    _this.getSearchResults = function () {\n      var searchCall = ['https://data.lcb.wa.gov/resource/bhbp-x4eb.json?'];\n      searchCall.push('$where=organization%20like%20%27%25' + _this.state.input + '%25%27');\n      searchCall.push('or license%20like%20%27' + _this.state.input + '%25%27');\n      searchCall.push('or ubi%20like%20%27' + _this.state.input + '%25%27');\n      searchCall.push('&$order=%20organization');\n      fetch(searchCall.join('')).then(function (response) {\n        return response.json();\n      }).then(_this.storeSearchResults);\n    };\n\n    _this.storeSearchResults = function (resultArray) {\n      var tempState = _this.state;\n      tempState.results = resultArray;\n\n      _this.setState(tempState);\n    };\n\n    _this.displaySearchResults = function () {\n      var results = [];\n\n      _this.state.results.forEach(function (license) {\n        results.push(React.createElement(SearchResult, {\n          data: license,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }));\n      });\n\n      return results;\n    };\n\n    _this.displaySearchResultsSummary = function () {\n      console.log('you wanna display ', _this.state.results); // let table = '';\n      // if(this.state.results.length > 0 ){\n      // \ttable = '<table id=\"search-results\">';\n      // \tthis.state.results.forEach((record)=>{\n      // \t\ttable += '<tr>';\n      // \t\t\ttable += '<td>'+record.organization+'</td>';\n      // \t\t\ttable += '<td>'+record.license+'</td>';\n      // \t\t\ttable += '<td>'+record.type+'</td>';\n      // \t\t\ttable += '<td>'+record.active+'</td>';\n      // \t\ttable += '</tr>';\n      // \t})\n      // \ttable += '</table>';\n      // }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Found \", _this.state.results.length, \" licenses with the search term \\\"\", _this.state.input, \"\\\".\"));\n    };\n\n    _this.state = {\n      input: '',\n      results: []\n    };\n    return _this;\n  } // This simply update the state for the search submission, then it calls the search function.\n\n\n  _createClass(Detail, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"This gon be the details page...\"));\n    }\n  }]);\n\n  return Detail;\n}(Component); // <SearchResult />\n// <ReactTable data={this.state.results} columns={tableCols} />\n// {this.displaySearchResultsSummary()}\n\n\nexport default Detail;","map":{"version":3,"sources":["/Users/phillip/Development/vhosts/playground.develop/good-green/src/components/details/index.js"],"names":["React","Component","SearchResult","Detail","props","console","log","updateSearch","e","term","target","querySelector","value","tempState","state","input","toUpperCase","setState","getSearchResults","preventDefault","searchCall","push","fetch","join","then","response","json","storeSearchResults","resultArray","results","displaySearchResults","forEach","license","displaySearchResultsSummary","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n// import { Link } from 'react-router-dom'\n// import { push } from 'connected-react-router'\n// import { bindActionCreators } from 'redux'\n// import { connect } from 'react-redux'\n// import ReactTable from \"react-table\";\n\n// Components\nimport SearchResult from '../search-result'\n\nclass Detail extends Component {\n\tconstructor(props) {\n\nconsole.log(props)\n\n\t\tsuper(props);\n\n\t\t// Simple state for just the search term\n\t\tthis.state = {\n\t\t\tinput: '',\n\t\t\tresults: [],\n\t\t}\n\t}\n\n\t// This simply update the state for the search submission, then it calls the search function.\n\tupdateSearch = (e) => {\n\t\tlet term = e.target.querySelector('#search-term').value\n\t\tlet tempState = this.state\n\t\ttempState.input = term.toUpperCase();\n\t\tthis.setState(tempState)\n\t\tthis.getSearchResults();\n\t\te.preventDefault()\n\t}\n\n\t// This will make a call against the licenses enpoint with the search term. It's kinda messy but it searches against name, ubi, \n\t// and lic# since you can easily find one of those things on the packaging (or so I've been told).\n\tgetSearchResults = () => {\n\t\tlet searchCall = ['https://data.lcb.wa.gov/resource/bhbp-x4eb.json?'];\n\t\tsearchCall.push('$where=organization%20like%20%27%25'+this.state.input+'%25%27');\n\t\tsearchCall.push('or license%20like%20%27'+this.state.input+'%25%27');\n\t\tsearchCall.push('or ubi%20like%20%27'+this.state.input+'%25%27');\n\t\tsearchCall.push('&$order=%20organization');\n\t\tfetch(searchCall.join('')).then(response => response.json()).then(this.storeSearchResults)\n\t}\n\t// This stores the latest search results in the state for display later\n\tstoreSearchResults = (resultArray) => {\n\t\tlet tempState = this.state\n\t\ttempState.results = resultArray\n\t\tthis.setState(tempState)\n\t}\n\tdisplaySearchResults = () => {\n\t\tlet results = [];\n\t\tthis.state.results.forEach((license) => {\n\t\t\tresults.push(<SearchResult data={license} />)\n\t\t})\n\t\treturn results;\n\t}\n\tdisplaySearchResultsSummary = () => {\n\t\tconsole.log('you wanna display ',this.state.results)\n\n\t\t// let table = '';\n\t\t// if(this.state.results.length > 0 ){\n\t\t// \ttable = '<table id=\"search-results\">';\n\t\t// \tthis.state.results.forEach((record)=>{\n\t\t// \t\ttable += '<tr>';\n\t\t// \t\t\ttable += '<td>'+record.organization+'</td>';\n\t\t// \t\t\ttable += '<td>'+record.license+'</td>';\n\t\t// \t\t\ttable += '<td>'+record.type+'</td>';\n\t\t// \t\t\ttable += '<td>'+record.active+'</td>';\n\t\t// \t\ttable += '</tr>';\n\t\t// \t})\n\t\t// \ttable += '</table>';\n\t\t// }\n\n\n\t\treturn (<div>\n\t\t\t<b>Found {this.state.results.length} licenses with the search term \"{this.state.input}\".</b>\n\t\t</div>)\n\t}\n\n\trender(){ \n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h2>This gon be the details page...</h2>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\t\t\t\t\t// <SearchResult />\n\t\t\t\t\t// <ReactTable data={this.state.results} columns={tableCols} />\n\t\t\t\t\t// {this.displaySearchResultsSummary()}\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}